images:
  ingestor: ashupednekar535/litefunctions-ingestor:latest
  operator: ashupednekar535/litefunctions-operator:latest

ingestor:
  nats_broker_url: litefunctions-nats:4222

nats:
  enabled: false
  natsBox:
    enabled: false
  config:
    cluster:
      enabled: true
      replicas: 3
    jetstream:
      enabled: true
      fileStore:
        enabled: true
        pvc:
          enabled: true
          size: 4Gi
    reloader:
      enabled: false
 

database:
  enabled: false
  postgresVersion: 16
  pgBouncerReplicas: 1
  instanceReplicas: 2
  instanceVolumeSize: 4Gi
  initialSchemas:
    - gitea
    - lwsportal
    - harbor

minio:
  enabled: false
  global:
    security:
      allowInsecureImages: true
  image:
    repository: bitnamilegacy/minio
  auth:
    rootUser: ashudev
    rootPassword: minioadmin
  mode: standalone
  defaultBuckets: content
  persistence:
    enabled: true
    size: 15Gi
  ingress:
    enabled: true
    ingressClassName: nginx
    hostname: lws.ashudev.in # override 
    path: /content
    pathType: Prefix
    tls: true
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt
  console:
    enabled: true
    image:
      repository: bitnamilegacy/minio-object-browser
    ingress:
      enabled: false
      ingressClassName: nginx
      hostname: s3.ashudev.in # override
      path: /
      pathType: Prefix
      tls: true
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt

valkey-cluster:
  global:
    security:
      allowInsecureImages: true
  image:
    repository: bitnamilegacy/valkey-cluster

gitea:
  enabled: true
  postgresql-ha:
    enabled: false
  valkey-cluster:
    enabled: false
  admin:
    username: ashudev
    password: gitadmin
    email: gitea@ashudev.in
  config:
    database:
      DB_TYPE: postgres
      SCHEMA: gitea
      SSL_MODE: require
    cache:
      ADAPTER: redis
      HOST: litefunctions-valkey-cluster:6379
  additionalConfigFromEnvs:
  - name: GITEA__DATABASE__HOST
    valueFrom:
      secretKeyRef:
        key: host
        name: litefunctions-pguser-litefunctions
  - name: GITEA__DATABASE__PASSWD
    valueFrom:
      secretKeyRef:
        key: password
        name: litefunctions-pguser-litefunctions
  - name: GITEA__DATABASE__NAME
    valueFrom:
      secretKeyRef:
        key: dbname
        name: litefunctions-pguser-litefunctions
  - name: GITEA__DATABASE__USER
    valueFrom:
      secretKeyRef:
        key: user
        name: litefunctions-pguser-litefunctions
  ingress:
    enabled: false
    tls:
      certSource: secret
      secret:
        secretName: harbor-ingress-tls
    hosts:
    - host: git.ashudev.in
      paths:
      - path: /
    className: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt


harbor:
  trivy:
    enabled: false
  redis:
    type: external
    external:
      addr: "litefunctions-valkey-cluster:6379"
  database:
    type: external
    external:
      host: "litefunctions-primary"
      port: "5432"
      username: "harbor"
      existingSecret: "litefunctions-pguser-harbor"
      existingSecretPasswordKey: "password"
      coreDatabase: "harbor"
      jobServiceDatabase: "harbor"
      userDatabase: "harbor"
      notaryServerDatabase: "harbor"
      notarySignerDatabase: "harbor"

litewebservices-portal:
  server:
    db:
      secret: litefunctions-pguser-litefunctions
