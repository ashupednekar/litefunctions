redis:
  enabled: true

images:
  ingestor: ashupednekar535/litefunctions-ingestor:latest
  operator: ashupednekar535/litefunctions-operator:latest

ingestor:
  nats_broker_url: litefunctions-nats:4222

nats:
  enabled: true
  natsBox:
    enabled: false
  config:
    cluster:
      enabled: true
      replicas: 3
    jetstream:
      enabled: true
      fileStore:
        enabled: true
        pvc:
          enabled: true
          size: 4Gi
    reloader:
      enabled: false
 

database:
  enabled: true
  postgresVersion: 16
  pgBouncerReplicas: 1
  instanceReplicas: 2
  instanceVolumeSize: 4Gi
  initialSchemas:
    - gitea
    - lwsportal

minio:
  enabled: false
  global:
    security:
      allowInsecureImages: true
  image:
    repository: bitnamilegacy/minio
  auth:
    rootUser: ashudev
    rootPassword: minioadmin
  mode: standalone
  defaultBuckets: content
  persistence:
    enabled: true
    size: 15Gi
  ingress:
    enabled: true
    ingressClassName: nginx
    hostname: lws.ashudev.in # override 
    path: /content
    pathType: Prefix
    tls: true
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt
  console:
    enabled: true
    image:
      repository: bitnamilegacy/minio-object-browser
    ingress:
      enabled: false
      ingressClassName: nginx
      hostname: s3.ashudev.in # override
      path: /
      pathType: Prefix
      tls: true
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt

valkey-cluster:
  enabled: true
  global:
    security:
      allowInsecureImages: true
  auth:
    enabled: true
  password: valkeyadmin
  image:
    repository: bitnamilegacy/valkey-cluster

gitea:
  enabled: true
  service:
    http:
      type: NodePort
      nodePort: 30080
    ssh:
      type: NodePort
      nodePort: 30022
  postgresql-ha:
    enabled: false
  postgresql:
    enabled: false
  valkey-cluster:
    enabled: false
  gitea:
    admin:
      username: ashudev
      password: gitadmin
      email: gitea@ashudev.in
     config:
       actions:
         ENABLED: true
       database:
         DB_TYPE: postgres
         NAME: litefunctions
         SCHEMA: gitea
         SSL_MODE: require
         HOST: "litefunctions-pgbouncer.litefunctions.svc"
    additionalConfigFromEnvs:
    - name: GITEA__DATABASE__HOST
      valueFrom:
        secretKeyRef:
          key: host
          name: litefunctions-pguser-litefunctions
    - name: GITEA__DATABASE__PASSWD
      valueFrom:
        secretKeyRef:
          key: password
          name: litefunctions-pguser-litefunctions
    - name: GITEA__DATABASE__NAME
      valueFrom:
        secretKeyRef:
          key: dbname
          name: litefunctions-pguser-litefunctions
    - name: GITEA__DATABASE__USER
      valueFrom:
        secretKeyRef:
          key: user
          name: litefunctions-pguser-litefunctions
  ingress:
    enabled: false
    tls: []
    hosts:
    - host: git.ashudev.in
      paths:
      - path: /
    className: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt


harbor:
  expose:
    type: nodePort
    tls:
      auto:
        commonName: "harbor.local"
    nodePort:
      ports:
        http:
          nodePort: 30081
  trivy:
    enabled: false
  redis:
    type: external
    external:
      addr: "litefunctions-valkey-cluster:6379"
      password: "valkeyadmin"
  database: # TODO: use external database
    type: internal

ui:
  enabled: false
  server:
    db:
      secret: litefunctions-pguser-litefunctions
